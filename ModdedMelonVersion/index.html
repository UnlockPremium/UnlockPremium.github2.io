<!DOCTYPE html>
<html lang="en">
<head>
  <!-- CRITICAL: domain-check script (if you need it) should be the first script in <head> -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Melon SandBox modded (fixed)</title>

  <!--
    Fixed notes:
    - Removed malformed duplicate <html> and stray characters that broke parsing.
    - Replaced the brittle domain-blocker that emptied document.documentElement.innerHTML
      with a safer hostname check that shows an overlay (does NOT wipe the DOM or disable console).
    - allowedHostnames uses simple hostname strings (e.g. "unlockpremium.github.io").
    - Anti-copy protections are kept but non-destructive (no console override, no global fetch/XHR replacement).
  -->

  <script>
  (function () {
    'use strict';

    // List of allowed hostnames (use plain hostnames, not full URLs)
    const allowedHostnames = [
      'unlockpremium.github.io',
      'localhost',
      '127.0.0.1'
    ];

    function isAllowedHost() {
      // allow file:// for local testing
      if (window.location.protocol === 'file:') return true;
      const host = (window.location.hostname || '').toLowerCase();
      return allowedHostnames.some(h => h === host || host.endsWith('.' + h));
    }

    function showBlockedOverlay(reason) {
      try {
        const overlay = document.createElement('div');
        overlay.id = 'domain-blocker-overlay';
        overlay.style.cssText = 'position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.95);color:#fff;z-index:2147483647;padding:20px;text-align:center;font-family:system-ui,sans-serif;';
        overlay.innerHTML = '<div style="max-width:680px;">\n          <h2 style="margin:0 0 10px;font-size:20px">Site blocked</h2>\n          <p style="margin:0 0 14px;color:#ddd;line-height:1.4">This page is not allowed to run on this domain. (' + (reason || window.location.hostname) + ')</p>\n          <button id="domainOpenBtn" style="padding:10px 18px;border-radius:8px;border:none;background:#1ac6ff;color:#002;cursor:pointer">Open anyway</button>\n        </div>';

        document.documentElement.appendChild(overlay);

        // allow the user to continue if they explicitly choose to
        document.getElementById('domainOpenBtn').addEventListener('click', function () {
          overlay.parentNode.removeChild(overlay);
        });
      } catch (e) {
        // silent fail - never wipe the page
        console && console.warn && console.warn('Could not show overlay', e);
      }
    }

    function init() {
      if (!isAllowedHost()) {
        // Show overlay but DO NOT destroy the DOM or disable console/network.
        showBlockedOverlay();
        return;
      }

      // Non-destructive anti-copy protections (optional)
      document.addEventListener('contextmenu', function (e) { e.preventDefault(); }, false);
      document.addEventListener('selectstart', function (e) { /* allow selection if user holds ctrl */ }, false);

      // keyboard shortcuts blocking (only common copy/debugging combos) — do not disable F12 or console entirely
      document.addEventListener('keydown', function (e) {
        // block Ctrl+U, Ctrl+Shift+I/J, Ctrl+C/S/A when present
        if (e.ctrlKey && (e.key === 'u' || e.key === 'U')) { e.preventDefault(); }
        if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) { e.preventDefault(); }
        if (e.ctrlKey && (e.key === 'c' || e.key === 's' || e.key === 'a' || e.key === 'C' || e.key === 'S' || e.key === 'A')) { e.preventDefault(); }
      }, false);

      // If you need continuous checks (optional) keep them lightweight
      if (window.location.protocol !== 'file:') {
        window.addEventListener('focus', function () {
          if (!isAllowedHost()) showBlockedOverlay();
        });
      }
    }

    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init); else init();
  })();
  </script>

  <!-- Simple Instagram in-app fallback (non-destructive) -->
  <script>
  (function () {
    'use strict';
    const userAgent = navigator.userAgent || '';
    const isInstagram = /Instagram/i.test(userAgent);
    const isAndroid = /Android/i.test(userAgent);
    const isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;

    function showFallbackButton() {
      // creates a simple fallback button if you want it
      const btn = document.getElementById('instagramFallbackButton');
      if (btn) btn.style.display = 'inline-block';
    }

    function attemptRedirect() {
      if (!isInstagram) return;
      // don't aggressively break the page — try a single non-blocking attempt
      try {
        if (isAndroid) {
          const intentUrl = 'intent://' + window.location.hostname + window.location.pathname + window.location.search + '#Intent;scheme=https;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;end';
          window.location.href = intentUrl;
        } else if (isIOS) {
          // open the same URL in a new tab/window — this sometimes opens in system browser
          const a = document.createElement('a');
          a.href = window.location.href;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          document.body.appendChild(a);
          a.click();
          setTimeout(function () { try { a.remove(); } catch (e) {} }, 200);
        }
      } catch (e) {
        // fail silently
      }
    }

    setTimeout(function () { if (isInstagram && document.visibilityState === 'visible') showFallbackButton(); }, 1200);
    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', attemptRedirect); else attemptRedirect();
  })();
  </script>

  <link rel="shortcut icon" type="image/png" href="favicons/4674-images-favicon-32x32.png">
  <link rel="stylesheet" href="css/css-bootstrap-icons.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&amp;display=swap" rel="stylesheet">

  <style>
    /* keep the same styling you had — trimmed for brevity in this example */
    body { background-color:#222736; font-family:'Kanit',sans-serif; margin:0; padding:0 }
    .bg{padding:20px;min-height:100vh;display:flex;justify-content:center;align-items:center}
    .main{box-shadow:0 3px 20px rgba(0,0,0,.15);background:linear-gradient(135deg,#2a3042,#1c2233);padding:30px;width:100%;max-width:420px;border-radius:15px;text-align:center;position:relative;overflow:hidden}
    .logo{width:120px;height:120px;border-radius:20px;border:3px solid #1ac6ff;padding:5px;background:#2a3042;margin-bottom:20px}
    button{all:unset;background:linear-gradient(90deg,#1ac6ff,#4d5bce);color:#fff;padding:12px 40px;border-radius:30px;cursor:pointer}
  </style>
</head>
<body>
  <div class="bg">
    <div class="main">
      <img class="logo" src="images/mOGIJei.png" alt="Melon Sandbox Logo">
      <h1>Melon Sandbox Modded</h1>
      <p>Unlock all premium features and mods for free!</p>

      <div style="margin-top:18px">
        <button id="downloadBtn">DOWNLOAD NOW</button>
      </div>

      <div style="margin-top:12px;font-size:.9rem;color:#ddd">Last updated: Dec 29, 2025</div>
    </div>
  </div>

  <script>
    // Download/Open logic — simple and safe
    document.getElementById('downloadBtn').addEventListener('click', function () {
      const url = 'https://unlockpremium.github.io/UnlockPremium.github2.io/ModdedMelonVersion/HumanVerification.html?key=8589d';
      window.open(url, '_blank');
    });
  </script>
</body>
</html>

