<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <title>Open in Browser — Bridge</title>
  <meta name="description" content="Bridge page that instructs users how to open the current page in their external browser (Chrome / Safari).">
  <style>
    :root{
      --bg:#071025; --card:#0c1630; --accent:#2d7dff; --muted:rgba(255,255,255,0.75);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,var(--bg),#04101f);color:#fff;display:flex;align-items:center;justify-content:center;padding:20px}

    .card{width:100%;max-width:420px;background:var(--card);border-radius:14px;padding:22px;box-shadow:0 10px 40px rgba(2,6,23,.6);text-align:center}
    h1{font-size:18px;margin:0 0 8px}
    p{margin:0 0 18px;color:var(--muted);font-size:14px;line-height:1.35}

    .cta{display:flex;gap:10px;justify-content:center}
    .btn{background:var(--accent);border:none;color:#fff;padding:12px 16px;border-radius:10px;font-weight:600;text-decoration:none;display:inline-block}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.07);color:var(--muted)}

    .hint{font-size:13px;color:var(--muted);margin-top:14px}

    @media (max-width:420px){ .card{padding:18px} }
    .hidden{display:none !important}
    .btn:focus{outline:3px solid rgba(45,125,255,.18)}

    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2,6,23,0.6);
      z-index: 9999;
    }
    .modal .panel {
      background: #09122a;
      padding: 18px;
      border-radius: 12px;
      max-width: 340px;
      color: #fff;
      text-align: left;
    }
    .modal.show { display: flex; }
    .modal .close { margin-top:10px; display:block; text-align:right; color:var(--muted); cursor:pointer; font-size:13px; }
  </style>
</head>
<body>

  <div class="card" role="main" id="bridgeCard">
    <h1>Open this page in your browser</h1>
    <p id="subtitle">
      We detected that you're viewing this page inside an app.
      To continue securely, open it in your device browser.
    </p>

    <div class="cta">
      <button class="btn" id="copBtn" type="button">Show me where to tap</button>
      <button class="btn secondary" id="openBtn" type="button">Open anyway</button>
    </div>

    <div class="hint" id="platformHint">
      Tip: Tap the <strong>three dots ⋮</strong> at the top-right and choose
      <strong>Open in browser</strong>.
    </div>

    <div class="hint" style="margin-top:10px;font-size:12px;color:rgba(255,255,255,0.55)">
      If you are not inside an app, the page will open normally.
    </div>
  </div>

  <div class="modal" id="howModal" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true">
      <h3 style="margin:0 0 8px;font-size:16px">How to open in browser</h3>
      <ol style="margin:0 0 8px 16px;line-height:1.5">
        <li>Tap the <strong>three dots (⋮)</strong> in the top-right corner.</li>
        <li>Select <strong>Open in browser</strong> (or Safari on iOS).</li>
        <li>Continue in Chrome or Safari.</li>
      </ol>
      <div class="close" id="closeModal">Close</div>
    </div>
  </div>

  <script>
    (function () {
      var TARGET_URL = 'https://unlockpremium.github.io/UnlockPremium.github2.io/ModdedMelonVersion';

      var ua = navigator.userAgent || '';
      var isInApp = /tiktok|instagram|fbav|facebook/i.test(ua);
      var isIOS = /iphone|ipad|ipod/i.test(ua);

      var subtitle = document.getElementById('subtitle');
      var platformHint = document.getElementById('platformHint');
      var copBtn = document.getElementById('copBtn');
      var openBtn = document.getElementById('openBtn');

      if (!isInApp) {
        window.location.replace(TARGET_URL);
        return;
      }

      platformHint.innerHTML = isIOS
        ? 'Tap the share icon and choose <strong>Open in Safari</strong>.'
        : 'Tap the <strong>three dots ⋮</strong> and choose <strong>Open in browser</strong>.';

      openBtn.addEventListener('click', function () {
        try {
          var w = window.open(TARGET_URL, '_blank', 'noopener,noreferrer');
          if (!w) window.location.href = TARGET_URL;
        } catch (e) {
          window.location.href = TARGET_URL;
        }
      });

      var howModal = document.getElementById('howModal');
      var closeModal = document.getElementById('closeModal');

      copBtn.addEventListener('click', function () {
        howModal.classList.add('show');
      });

      closeModal.addEventListener('click', function () {
        howModal.classList.remove('show');
      });

      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') howModal.classList.remove('show');
      });
    })();
  </script>

</body>
</html>
